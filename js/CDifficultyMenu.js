function CDifficutlyMenu(){var s,n,o,_,u,l,a,r,c,f,E,S,d,h=null,g=null;this._init=function(){u=createBitmap(s_oSpriteLibrary.getSprite("bg_menu")),s_oStage.addChild(u);var e=s_oSpriteLibrary.getSprite("but_lang"),t=s_oSpriteLibrary.getSprite("but_exit");n={x:CANVAS_WIDTH-t.width/2-10,y:e.height/2+10},(a=new CGfxButton(n.x,n.y,t,s_oStage)).addEventListener(ON_MOUSE_DOWN,this._onMouseDownButExit,this);var i=s_oSpriteLibrary.getSprite("audio_icon");_=!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?(s={x:n.x-i.width/2-10,y:n.y},(l=new CToggle(s.x,s.y,i,s_bAudioActive,s_oStage)).addEventListener(ON_MOUSE_UP,this._onAudioToggle,this),{x:s.x-e.width/NUM_LANGUAGES-10,y:s.y}):{x:n.x-t.width/2-10,y:n.y},(f=new CButLang(_.x,_.y,NUM_LANGUAGES,s_iCurLang,e,s_oStage)).addEventListener(ON_SELECT_LANG,this._onChangeLang,this);t=window.document,e=t.documentElement;h=e.requestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullScreen||e.msRequestFullscreen,g=t.exitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen||t.msExitFullscreen,(h=!1===ENABLE_FULLSCREEN?!1:h)&&screenfull.isEnabled&&(i=s_oSpriteLibrary.getSprite("but_fullscreen"),o={x:i.width/4+10,y:i.height/2+10},(c=new CToggle(o.x,o.y,i,s_bFullscreen,s_oStage)).addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));i={x:CANVAS_WIDTH/2,y:CANVAS_HEIGHT/2-200};(E=new CTextButton(i.x,i.y,s_oSpriteLibrary.getSprite("but_text"),TEXT_EASY,FONT_GAME,"#fff",60,"center",s_oStage)).setTextOffsetX(10),E.setTextOffsetY(10),E.addEventListenerWithParams(ON_MOUSE_DOWN,this._onPressDownButDifficulty,this,EASY);i={x:CANVAS_WIDTH/2,y:CANVAS_HEIGHT/2};(S=new CTextButton(i.x,i.y,s_oSpriteLibrary.getSprite("but_text"),TEXT_MEDIUM,FONT_GAME,"#fff",60,"center",s_oStage)).addEventListenerWithParams(ON_MOUSE_DOWN,this._onPressDownButDifficulty,this,MEDIUM),S.setTextOffsetX(10),S.setTextOffsetY(10);i={x:CANVAS_WIDTH/2,y:CANVAS_HEIGHT/2+200};(d=new CTextButton(i.x,i.y,s_oSpriteLibrary.getSprite("but_text"),TEXT_HARD,FONT_GAME,"#fff",60,"center",s_oStage)).setTextOffsetX(10),d.setTextOffsetY(10),d.addEventListenerWithParams(ON_MOUSE_DOWN,this._onPressDownButDifficulty,this,HARD),(r=new createjs.Shape).graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT),s_oStage.addChild(r),createjs.Tween.get(r).to({alpha:0},1e3,createjs.Ease.cubicOut),sizeHandler(),E.changeText(TEXT_EASY),S.changeText(TEXT_MEDIUM),d.changeText(TEXT_HARD)},this._onPressDownButDifficulty=function(e){s_iGameDifficulty=e,this._onExit(function(){s_oDifficultyMenu.unload(),s_oMain.gotoGame(),$(s_oMain).trigger("start_session")})},this._onMouseDownButExit=function(){this._onExit(function(){s_oDifficultyMenu.unload(),s_oMain.gotoMenu()})},this._onExit=function(e){r.on("click",function(){}),r.visible=!0,createjs.Tween.get(r).to({alpha:1},1e3,createjs.Ease.cubicOut).call(e)},this.unload=function(){E.unload(),S.unload(),d.unload(),!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||(l.unload(),l=null),h&&screenfull.isEnabled&&c.unload(),f.unload(),r.removeAllEventListeners(),s_oStage.removeAllChildren(),s_oDifficultyMenu=null},this.refreshButtonPos=function(){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||l.setPosition(s.x-s_iOffsetX,s_iOffsetY+s.y),h&&screenfull.isEnabled&&c.setPosition(o.x+s_iOffsetX,o.y+s_iOffsetY),f.setPosition(_.x-s_iOffsetX,_.y+s_iOffsetY),a.setPosition(n.x-s_iOffsetX,n.y+s_iOffsetY)},this._onChangeLang=function(e){s_iCurLang=e,refreshLanguage(),E.changeText(TEXT_EASY),S.changeText(TEXT_MEDIUM),d.changeText(TEXT_HARD)},this._onAudioToggle=function(){Howler.mute(s_bAudioActive),s_bAudioActive=!s_bAudioActive},this.resetFullscreenBut=function(){h&&screenfull.isEnabled&&c.setActive(s_bFullscreen)},this._onFullscreenRelease=function(){s_bFullscreen?g.call(window.document):h.call(window.document.documentElement),sizeHandler()},(s_oDifficultyMenu=this)._init()}var s_oDifficultyMenu=null;